<div class="table-container" style="margin-top: 50px;">
  <h2>All Comments (Pending Approval)</h2>

  <div class="buttons">
    <button class="approve-button" (click)="onApproveComment()">Approve</button>
    <button class="delete-button" (click)="onDeleteComment()">Delete</button>
  </div>

  <table mat-table [dataSource]="comments" matSort #commentSort="matSort">

    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef> Select </th>
      <td mat-cell *matCellDef="let comment">
        <mat-checkbox
            (change)="selectComment(comment, $event)"
            [checked]="selectedComment === comment"
            [disabled]="comment.commentStatus === 'DELETED'">
        </mat-checkbox>
      </td>
    </ng-container>

    <ng-container matColumnDef="userFullName">
        <th mat-header-cell *matHeaderCellDef> Full Name </th>
        <td mat-cell *matCellDef="let comment"> {{ comment.userFullName }} </td>
    </ng-container>

    <ng-container matColumnDef="commentedEntity">
        <th mat-header-cell *matHeaderCellDef> Commented On </th>
        <td mat-cell *matCellDef="let comment">
        {{ comment.event || comment.service || comment.product || 'Unknown' }}
        </td>
    </ng-container>

    <ng-container matColumnDef="userEmail">
        <th mat-header-cell *matHeaderCellDef> User Email </th>
        <td mat-cell *matCellDef="let comment"> {{ comment.email }} </td>
    </ng-container>

    <ng-container matColumnDef="content"> 
      <th mat-header-cell *matHeaderCellDef> Content </th>
      <td mat-cell *matCellDef="let comment" class="content-cell"> {{ comment.content }} </td>
    </ng-container>

    <ng-container matColumnDef="dateCreated">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let comment"> {{ comment.date | date:'dd.MM.yyyy' }} </td>
    </ng-container>

    <ng-container matColumnDef="commentStatus">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let comment"> {{ comment.commentStatus }} </td>
    </ng-container>

    <tr mat-row 
        *matRowDef="let row; columns: displayedColumns;" 
        [ngClass]="{'deleted-row': row.commentStatus === 'DELETED'}">
    </tr>
  </table>
</div>
